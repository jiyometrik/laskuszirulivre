\ProvidesPackage{zesztof}
% \RequirePackage{amsfonts, amsthm, amsmath, amssymb}
\RequirePackage{mathtools}

\RequirePackage{siunitx}
\RequirePackage{pgfplots}
\pgfplotsset{compat=1.18}
\RequirePackage{tikz-cd}
\RequirePackage[usenames,dvipsnames,table]{xcolor}

% \RequirePackage[quiet]{mathspec}
\RequirePackage{fontspec}
\setmainfont{Libertinus Serif}
% \setmathsfont{Libertinus Math}
\setsansfont{Libertinus Sans}
\setmonofont{Source Code Pro}
\RequirePackage{microtype}

\providecommand{\seda}[1]{\textbf{#1}}
\providecommand{\vikti}[1]{\textit{#1}}

\providecommand{\bN}{\mbb{N}}
\providecommand{\bC}{\mbb{C}}
\providecommand{\bR}{\mbb{R}}
\providecommand{\bQ}{\mbb{Q}}
\providecommand{\bZ}{\mbb{Z}}

\RequirePackage{setspace}
\onehalfspacing

\providecommand{\@mathsect}[3][section]{\csname#1\endcsname[\texorpdfstring{#2}{#3}]{{\boldmath #2}}}
\providecommand{\msection}[2]{\@mathsect[section]{#1}{#2}}
\providecommand{\msubsection}[2]{\@mathsect[subsection]{#1}{#2}}
\providecommand{\msubsubsection}[2]{\@mathsect[subsubsection]{#1}{#2}}

\providecommand{\silentchapter}[1]{
	\chapter*{#1}
	\markboth{#1}{#1}
	\addcontentsline{toc}{chapter}{#1}
}

\def\tcb@restore@footnote{%
  \def\@mpfn{footnote}%
  \def\thempfn{\arabic{footnote}}%
  \let\@footnotetext\tcb@footnote@collect
}

% collect footnote text
\long\def\tcb@footnote@collect#1{%
  % expand \@thefnmark before appending before app to \tcb@footnote@acc
  \expandafter\gappto\expandafter\tcb@footnote@acc\expandafter{%
    \expandafter\footnotetext\expandafter[\@thefnmark]{#1}%
  }%
}

\def\tcb@footnote@use{%
  \tcb@footnote@acc
  \global\let\tcb@footnote@acc\@empty
}
\global\let\tcb@footnote@acc\@empty

% \addtokomafont{title}{\color{Crimson!50!black}}
% \addtokomafont{part}{\color{Crimson}}
% \addtokomafont{chapter}{\color{Crimson}}
% \addtokomafont{section}{\color{Crimson}}
% \addtokomafont{subsection}{\color{Crimson}}
% \addtokomafont{subsubsection}{\color{Crimson}}
% \addtokomafont{paragraph}{\color{Crimson}}
% \addtokomafont{captionlabel}{\color{Crimson}}
% \addtokomafont{pagenumber}{\color{Crimson}}

\RequirePackage[most]{tcolorbox}
\tcbset{
	breakable,
	before skip=4mm,
	after skip=4mm,
	left skip=2pt,
	right skip=2pt,
	toptitle=2mm,
	bottomtitle=1mm,
	bottom=2mm,
	left=2pt,
	right=2pt,
	boxrule=0pt,
	bottomrule=1pt,
	toprule=1pt,
	sharp corners,
  every box/.style={
    before upper pre=\tcb@restore@footnote
  },
  every box on layer 1/.append style={
    after app=\tcb@footnote@use
  }
}

\newtcolorbox[auto counter, number within=chapter]{tatoeba}{%
	title=Tatoeba~\thetcbcounter,
	fonttitle=\bfseries\sffamily,
	enhanced,
	breakable,
	colback=MidnightBlue!10!white,
	colbacktitle=MidnightBlue!10!white,
	coltitle=black,
}

\newtcolorbox[auto counter, number within=chapter]{svarna}{%
	title=Svarna~\thetcbcounter,
	fonttitle=\bfseries\sffamily,
	enhanced,
	breakable,
	colback=OliveGreen!10!white,
	colbacktitle=OliveGreen!10!white,
	coltitle=black,
}

\newtcolorbox[auto counter, number within=chapter]{lyenszinen}{%
	title=Lyenszinen~\thetcbcounter,
	fonttitle=\bfseries\sffamily,
	enhanced,
	breakable,
	colback=Rhodamine!10!white,
	colbacktitle=Rhodamine!10!white,
	coltitle=black,
}

\RequirePackage{hyperref}
\hypersetup{
	colorlinks=true,
	linkcolor=Blue!80!black,
	citecolor=OliveGreen,
	urlcolor=OliveGreen,
}
